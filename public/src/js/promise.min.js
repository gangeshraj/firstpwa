window.setImmediate||function(){"use strict";var i=0,o={},u=!0,r=Array.prototype.slice,c="setImmediatePolyfillMessage";function f(n){var t,e=n.data;"string"==typeof e&&0==e.indexOf(c)&&(t=o[e])&&(delete o[e],function(n){var t=n[0];switch(n.length){case 1:return t();case 2:return t(n[1]);case 3:return t(n[1],n[2])}t.apply(window,r.call(n,1))}(t))}window.setImmediate=function(){for(var n=i++,t=c+n,e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return o[t]=r,u&&(u=!1,window.addEventListener("message",f)),window.postMessage(t,"*"),n},window.clearImmediate=function(n){delete o[c+n]}}(),function(n){"use strict";var a="[[PromiseStatus]]",s="[[PromiseValue]]",l="[[OnFulfilled]]",d="[[OnRejected]]",h="[[OriginalError]]",r="pending",o="internal pending",w="fulfilled",m="rejected",p="not an array.",t='constructor Promise requires "new".',y=n.setImmediate||require("timers").setImmediate,v=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)};function i(n){this[h]=n}function g(n){return n instanceof i}function P(n){return"function"==typeof n}function j(n){return n instanceof A}function e(n){return n}function E(n){throw n}function u(n){delete n[l],delete n[d]}function c(n){var t,e=n.length;for(t=0;t<e;t++)n[t]()}function I(n,t,e){var r=O(e);j(r)?r.then(n,t):g(r)?t(r[h]):n(e)}function O(e){var r;if(j(e))return e;if(function(n){return Object(n)===n}(e)){try{r=e.then}catch(n){return new i(n)}if(P(r))return new A(function(n,t){y(function(){try{r.call(e,n,t)}catch(n){t(n)}})})}return null}function f(t,n){function e(n){t[a]==r&&b(t,n)}try{n(function(n){t[a]==r&&!function t(e,n){var r;var i=O(n);j(i)?(e[a]=o,i.then(function(n){t(e,n)},function(n){b(e,n)})):g(i)?b(e,i[h]):(e[a]=w,e[s]=n,(r=e[l])&&r.length&&(u(e),c(r)))}(t,n)},e)}catch(n){e(n)}}function b(n,t){var e=n[d];n[a]=m,n[s]=t,e&&e.length&&(u(n),c(e))}function A(n){if(!j(this))throw new TypeError(t);this[a]=r,this[s]=void 0,f(this,n)}A.prototype.then=function(o,u){var c,f=this;return o=P(o)?o:e,u=P(u)?u:E,c=new A(function(e,r){function n(n){var t;try{t=n(f[s])}catch(n){return void r(n)}t===c?r(new TypeError("then() cannot return same Promise that it resolves.")):I(e,r,t)}function t(){y(n,o)}function i(){y(n,u)}switch(f[a]){case w:t();break;case m:i();break;default:!function(n,t,e){n[l]||(n[l]=[],n[d]=[]),n[l].push(t),n[d].push(e)}(f,t,i)}})},A.prototype.catch=function(n){return this.then(e,n)},A.resolve=function(e){var r=O(e);return j(r)?r:new A(function(n,t){g(r)?t(r[h]):n(e)})},A.reject=function(e){return new A(function(n,t){t(e)})},A.race=function(i){return new A(function(n,t){var e,r;if(v(i))for(r=i.length,e=0;e<r;e++)I(n,t,i[e]);else t(new TypeError(p))})},A.all=function(f){return new A(function(e,n){var t,r,i,o,u=0,c=0;if(v(f)){for(r=(f=f.slice(0)).length,o=0;o<r;o++)j(t=O(i=f[o]))?(c++,t.then(function(t){return function(n){f[t]=n,++u==c&&e(f)}}(o),n)):g(t)?n(t[h]):f[o]=i;c||e(f)}else n(new TypeError(p))})},"undefined"!=typeof module&&module.exports?module.exports=n.Promise||A:n.Promise||(n.Promise=A)}(this);